<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>register1.html</title>

    <!--引入axios工具类库-->
    <script src="js/axios-0.20.0.js"></script>

</head>
<body>
<h3>ajax的get方式请求</h3>
<form action="">
    用户名：<input type="text" name="username" id="username">  <span id="info"></span>
</form>

<script>
    document.getElementById('username').onblur=function () { // 1.文本框绑定失去焦点事件
        // 2.获取文本框value属性值
        let username = this.value;
        // alert(username)
        // 3.通过axios工具发送异步请求
        axios.get("/day07-json-ajax/RegisterServlet1?username="+username).then(resp=>{
            // 4. 接收服务器返回响应体的结果  resp.data={"username":"jack","age":18}

            // 5.根据返回结果判断，实现局部刷新
            if(resp.data==null){ // 可以注册
                document.getElementById('info').innerHTML='<font color="green">可以注册</font>';
            }else{ // 不可以注册
                document.getElementById('info').innerHTML='<font color="red">此用户名太受欢迎,请更换一个</font>';
            }
        })

    }
</script>
</body>
</html>